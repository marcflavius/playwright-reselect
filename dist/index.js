import{expect as g}from"@playwright/test";function l(e){let t=g(e);function o(n,s){let c={};for(let i of Object.keys(n)){let a=n[i];typeof a=="function"?c[i]=async(...d)=>(await a.apply(n,d),s):typeof a=="object"&&a!==null&&(c[i]=o(a,s))}return c}let r={};return Object.assign(r,o(t,r)),r}function u(e){return Object.assign(e,{debug:y(e),expectChain:()=>l(e)})}function T(e){let t=[],o=/(>)(<)(\/*)/g;e=e.replace(o,`$1
$2$3`);let r=0,n="  ";return e.split(`
`).forEach(s=>{let c=s.trim();c.match(/^<\/\w/)&&(r=Math.max(r-1,0)),t.push(n.repeat(r)+c),c.match(/^<\w[^>]*[^\/]>$/)&&r++}),t.join(`
`)}function y(e){return async()=>{try{let t=await e.evaluate(r=>r.outerHTML),o=`
[DEBUG] ${e.toString()}
${T(t)}
`;return console.log(o),o}catch(t){return console.error("[DEBUG ERROR] Could not read innerHTML:",t),t}}}function f(e,t){let o={get:()=>{let r=e.page.locator(e.locator._selector);return e.locator=e.page.locator(":root"),u(r)},debug:y(e.locator),expectChain:()=>l(e.locator)};if(t.children)for(let r of Object.keys(t.children)){let n=t.children[r];o[r]=()=>(n.build(e),f(e,n))}if(t.custom)for(let r of Object.keys(t.custom)){let n=t.custom[r];o[r]=(...s)=>{let c=n(e,...s);return e.locator=e.page.locator(":root"),u(c)}}return Object.assign(o,{inspect:()=>(console.log("[INSPECT] "+e.locator._selector),o)}),o}function m(e){let t={};for(let o of Object.keys(e.descriptor)){let r=e.descriptor[o];t[o]=()=>(r.build(e),f(e,r))}return t}var p=class{constructor(t,o){if(!o)throw new Error("new TestLocatorResolver(page, descriptor): descriptor is required");if(!t)throw new Error("new TestLocatorResolver(page, descriptor): page is required");this.page=t,this.descriptor=o,this.locator=t.locator(":root"),Object.assign(this,m(this))}},D=e=>t=>new p(t,e);export{D as reselectTree};
//# sourceMappingURL=index.js.map